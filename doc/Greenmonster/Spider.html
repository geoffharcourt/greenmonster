<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Greenmonster::Spider - RDoc Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/greenmonster/spider.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">HTTParty</span>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-pull_day">#pull_day</a>
    
    <li><a href="#method-i-pull_days">#pull_days</a>
    
    <li><a href="#method-i-pull_game">#pull_game</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="../Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="../spec/games/tst/year_2012/month_03/day_27/gid_2012_03_27_aaamlb_aabmlb_1/blank_txt.html">blank</a>
  
    <li class="file"><a href="../spec/games/tst/year_2012/month_03/day_27/gid_2012_03_27_aaamlb_aabmlb_1_bak/blank_txt.html">blank</a>
  
    <li class="file"><a href="../spec/games/tst/year_2012/month_03/day_27/not_2012_03_27_aaamlb_aabmlb_1/blank_txt.html">blank</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Greenmonster.html">Greenmonster</a>
  
    <li><a href="../Greenmonster/Spider.html">Greenmonster::Spider</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Greenmonster::Spider</h1>

  <div id="description" class="description">
    
<p>The Gameday XML <a href="Spider.html">Spider</a> utility</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-pull_day" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pull_day</span><span
            class="method-args">(date, sport_code)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Pull Gameday XML files for a given date. Default options for the spider are
to pull games with sport_code of ‘mlb’ (games played by MLB games rather
than MiLB teams or foreign teams) and to pull games on the current date.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-comment"># Pull games from July 4, 2011</span>
<span class="ruby-operator">&gt;&gt;</span> <span class="ruby-constant">Gameday</span><span class="ruby-operator">::</span><span class="ruby-constant">Spider</span>.<span class="ruby-identifier">pull_day</span>({:<span class="ruby-identifier">date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2011</span>,<span class="ruby-value">7</span>,<span class="ruby-value">1</span>), :<span class="ruby-identifier">games_folder</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/Users/geoff/games'</span>})
</pre>

<p>Arguments:</p>

<pre>args: (Hash)</pre>
          

          
          <div class="method-source-code" id="pull_day-source">
            <pre><span class="ruby-comment"># File lib/greenmonster/spider.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pull_day</span>(<span class="ruby-identifier">date</span>, <span class="ruby-identifier">sport_code</span>)
  <span class="ruby-identifier">game_links_on_gameday_date_page</span>(<span class="ruby-identifier">date</span>, <span class="ruby-identifier">sport_code</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">game_id</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">pull_game</span>(<span class="ruby-identifier">game_id</span>, <span class="ruby-identifier">date</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pull_day-source -->
          
        </div>

        

        
      </div><!-- pull_day-method -->

    
      <div id="method-i-pull_days" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pull_days</span><span
            class="method-args">(range, sport_code)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Pull Gameday XML files for a range of dates. The args hash passes arguments
like games_folder location on to Spider.pull.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-comment"># Pull all games in MLB in July 2011</span>
<span class="ruby-operator">&gt;&gt;</span> <span class="ruby-constant">Gameday</span><span class="ruby-operator">::</span><span class="ruby-constant">Spider</span>.<span class="ruby-identifier">pull_days</span>(<span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2011</span>,<span class="ruby-value">7</span>,<span class="ruby-value">1</span>)<span class="ruby-operator">..</span><span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2011</span>,<span class="ruby-value">7</span>,<span class="ruby-value">31</span>), {:<span class="ruby-identifier">games_folder</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/Users/geoff/games'</span>})
</pre>

<p>Arguments:</p>

<pre>range: (Range)
args: (Hash)</pre>
          

          
          <div class="method-source-code" id="pull_days-source">
            <pre><span class="ruby-comment"># File lib/greenmonster/spider.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pull_days</span>(<span class="ruby-identifier">range</span>, <span class="ruby-identifier">sport_code</span>)
  <span class="ruby-identifier">range</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">date</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pull_day</span>(<span class="ruby-identifier">date</span>, <span class="ruby-identifier">sport_code</span>) }
<span class="ruby-keyword">end</span></pre>
          </div><!-- pull_days-source -->
          
        </div>

        

        
      </div><!-- pull_days-method -->

    
      <div id="method-i-pull_game" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pull_game</span><span
            class="method-args">(game_id, date)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Pull Gameday XML files for a given game, specified by the game ID. If date
and sport code are not specified as options, these values are guessed from
the game ID string using the home team’s sport code and the date from the
scheduled date values in the game ID.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-operator">&gt;&gt;</span> <span class="ruby-constant">Gameday</span><span class="ruby-operator">::</span><span class="ruby-constant">Spider</span>.<span class="ruby-identifier">pull_game</span>(<span class="ruby-string">''</span>,{:<span class="ruby-identifier">games_folder</span> =<span class="ruby-operator">&gt;</span> })
</pre>
          

          
          <div class="method-source-code" id="pull_game-source">
            <pre><span class="ruby-comment"># File lib/greenmonster/spider.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pull_game</span>(<span class="ruby-identifier">game_id</span>, <span class="ruby-identifier">date</span>)
  <span class="ruby-identifier">make_folders_for_game</span>(<span class="ruby-identifier">game_id</span>, <span class="ruby-identifier">date</span>)

  <span class="ruby-node">%w(boxscore.xml game_events.xml inning_all.xml linescore.xml players.xml)</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file_name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">copy_gameday_xml</span>(<span class="ruby-identifier">game_id</span>, <span class="ruby-identifier">date</span>, <span class="ruby-identifier">file_name</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pull_game-source -->
          
        </div>

        

        
      </div><!-- pull_game-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

